<!DOCTYPE html>
<html  lang="en" dir="ltr">
<head>
    <meta charset="utf-8">
    <title>Flask App </title>



    <!-- Bootstraps Java Scipts Links -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>


    <!-- JQuery links  -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>


    <!--High CHART LIVE  -->
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/highcharts-more.js"></script>
    <script src="https://code.highcharts.com/modules/exporting.js"></script>

    <!--Gauge  -->
    <script type="text/javascript" src="http://pubnub.github.io/eon/lib/eon.js"></script>


    <!--datepicker -->  
    <script type="text/javascript" src="https://cdn.jsdelivr.net/jquery/latest/jquery.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css" />
	
</head>
<body>
    <!-- including navbar using jinja -->
    {% include 'navbar.html' %}

    <!-- main part of the homepage -->
    <div class="home">
        <div class="left">
            <div class="parameters">
                <div class="meter_info">
                    <div class="datasets" style="background-color: #3e1212;">
                        <h1 class="sensor10">Meter ID :</h1>
                    <br>
                        <h1 class="sensor11">Meter location : {{ data3 }}</h1>
                    </div>
                </div>
                <div class="Live_parameter_data">                   
                    <div class="datasets">
                        <h1 class="sensor1"> Average Voltage LL : </h1>
                    </div>
                    <br>
        
                    <div class="datasets">
                        <h1 class="sensor2">Average Current :</h1>
                    </div>
                    <br>
					<div class="datasets">
                        <h1 class="sensor21">Current_i1 :</h1>
                    </div>
                    <br>
					<div class="datasets">
                        <h1 class="sensor22">Current_i2 :</h1>
                    </div>
                    <br>
					<div class="datasets">
                        <h1 class="sensor23">Current_i3 :</h1>
                    </div>
                    <br>
                    <div class="datasets">
                        <h1 class="sensor3">Frequency :</h1>
                    </div>
                    <br>
                    <div class="datasets">
                        <h1 class="sensor4">Total harmonic distortion :</h1>
                    </div>
                    <br>
                    <div class="datasets">
                        <h1 class="sensor5">Apparent energy :</h1>
                    </div>
                    <br>
                    <div class="datasets">
                        <h1 class="sensor6">Power factor :</h1>
                    </div>
                    <br>
                    <div class="datasets">
                        <h1 class="sensor7">Energy :</h1>
                    </div>
                    <br>
                    <div class="datasets">
                        <h1 class="sensor8">Power :</h1>
                    </div>
                    <br>
                    <div class="datasets">
                        <h1 class="sensor9">Apparent power :</h1>
                    </div>
                    <br>
<div class="datasets">
                        <h1 class="sensor91">Reactive power :</h1>
                    </div>
                    <br>
					<div class="datasets">
                        <h1 class="sensor92">Reactive energy :</h1>
                    </div>
                    <br>
                </div>
                <div class="energy_meter">               <!-- Energy Calculation -->
                    <div class="calculation">
                        <div class="put">
                            <h1 class="values">Energy Consumption of previous day:</h1>
                            <input type="number" id="t1" value= "{{ data2 }}" disabled> KWh
                        </div>
                        <div class="put">                        
                            <h1 class="values">Total production of Previous Day:</h1>
                            <input type="number" id="t2"> Kg
                        </div>
                        <div class="put">
                            <input type="button" onclick="calcTotalCons()" value="Submit"/>
                            <h1 class="values">Specific Energy:  </h1><input type="number" id="num-area" disabled> KWh/Kg
                        </div>
                        <script>
                            function calcTotalCons() { 
                                var a = document.getElementById("t1").value; 
                                var b = document.getElementById("t2").value; 
                                document.getElementById("num-area").value = a / b; 
                            }  
                        </script>        
                    </div>
                </div>
            </div>
        </div>
		
        <div class="right">
			
			
			
			 <div class="buttons"> 
				  <div class="datime">
						<div id="dateTime1">
					 	 <script>
      function displayDateTime() {
        var dateTime = new Date();
        var date = dateTime.toLocaleDateString();
        var time = dateTime.toLocaleTimeString();
        document.getElementById("dateTime1").innerHTML = " Date: " + date + " Time: " + time;
      }
      setInterval(displayDateTime, 1000);
    </script></div>
				 </div>
				 <div class="meterbox">
                    <label for="MeterNo.">Select Meter No.:</label>
                    <form method="post" action="/currentdata">
                        <select  id="Meter_id" name="meter_id" type="text" placeholder ="Please select a meter">
                             <option disabled selected style>Select a meter</option>
                            <option value="GMBS C03_10D">GMBS C03_10D</option>
                            <option value="GMBS C05_08D">GMBS C05_08D</option>
                            <option value="GMBS C06_09D">GMBS C06_09D</option>
                            <option value="GMBS C08_16D">GMBS C08_16D</option>
                            <option value="GMBS C09_13D">GMBS C09_13D</option>
                            <option value="GMBS C18_14D">GMBS C18_14D</option>
                            <option value="GMBS C19_17D">GMBS C19_17D</option>
                            <option value="GMBS C20_18D">GMBS C20_18D</option>
                            <option value="GMBS C21_11D">GMBS C21_11D</option>
                            <option value="GMBS C24_12D">GMBS C24_12D</option>
                            <option value="GMBS C27_15D">GMBS C27_15D</option>
                           <!-- <option value="m1">Meter 1</option>
                            <option value="m2">Meter 2</option>
                            <option value="m3">Meter 3</option>
                            <option value="m4">Meter 4</option>
                            <option value="4">Meter 5</option>
                            <option value="1">Meter 6</option>
                            <option value="2">Meter 7</option>
                            <option value="3">Meter 8</option>
                            <option value="4">Meter 9</option>
                            <option value="4">Meter 10</option>
                            <option value="1">Meter 11</option>
                            <option value="2">Meter 12</option>
                            <option value="3">Meter 13</option>
                            <option value="4">Meter 14</option>
                            <option value="4">Meter 15</option>
                            <option value="1">Meter 16</option>
                            <option value="2">Meter 17</option>
                            <option value="3">Meter 18</option>
                            <option value="4">Meter 19</option>
                            <option value="4">Meter 20</option>
                            <option value="1">Meter 21</option>
                            <option value="2">Meter 22</option>
                            <option value="3">Meter 23</option>
                            <option value="4">Meter 24</option>
                            <option value="4">Meter 25</option>
                            <option value="1">Meter 26</option>
                            <option value="2">Meter 27</option>
                            <option value="3">Meter 28</option>
                            <option value="4">Meter 29</option>
                            <option value="4">Meter 30</option>
                            <option value="1">Meter 31</option>
                            <option value="2">Meter 32</option>
                            <option value="3">Meter 33</option>
                            <option value="4">Meter 34</option>
                            <option value="4">Meter 35</option>
                            <option value="1">Meter 36</option>
                            <option value="2">Meter 37</option>
                            <option value="3">Meter 38</option>
                            <option value="4">Meter 39</option>
                            <option value="4">Meter 40</option>
                            <option value="1">Meter 41</option>
                            <option value="2">Meter 42</option>
                            <option value="3">Meter 43</option>
                            <option value="4">Meter 44</option>
                            <option value="4">Meter 45</option>
                            <option value="1">Meter 46</option>
                            <option value="2">Meter 47</option>-->
                            


                        </select>    
                        <input type="submit" value="Submit" style="margin-left: 10px;"><div class="error"><h5><p id="demo"></p></h5></div>
                    </form>
                </div>
                <div class="btns">
                    <div class="downloadbtn">
                        <a href="/getPlotCSV">
                            Download
                        </a>
                    </div>
                    <div class="pop_up">
                            <!-- Trigger/Open The Modal -->
						<button id="myBtn" class="a">View Data</button>
                            
                            <!-- The Modal -->
                            <div id="myModal" class="modal">
                                <!-- Modal content -->
                                <div class="modal-content">
                                    <div class="modal-header">
                                    <h2>Live Data</h2>
                                    <button class="close">&times;</button>
                                    </div>
                                    <div class="modal-body">
                                        <table id="datatable" style="width: 100%">
                                            <tr>
                                             <th>MM/DD/YYYY-HH/MM/SS/MS</th>
                                              <th>Average Voltage </th>
											  <th>Current_i1</th>
											  <th>Current_i2</th>
											  <th>Current_i3</th>
                                              <th>Average Current </th>
											  <th>Frequency</th>
											  <th>Average Power Factor</th>
                                              <th>Total Harmonic Distortion</th>
                                              <th>Active Power</th>
											  <th>Active Energy</th>
                                              <th>Reactive Power</th>
											  <th>Reactive Energy</th> 
											  <th>Apparent Power</th>
											  <th>Apparent Energy</th>
</tr>
                                            {{ data0 }}
                                            {% for row in data1 %}
                                            <tr>
                                              {% for cell in row %}
                                              <td>{{ cell }}
                                                
                                              </td>
                                              {% endfor %}
                                            </tr>
                                            {% endfor %}
                                          </table>
                                    </div>
                                </div>
                                
                            </div>                               
                            <script>
                            // Get the modal
                            var modal = document.getElementById("myModal");
                            
                            // Get the button that opens the modal
                            var btn = document.getElementById("myBtn");
                            
                            // Get the <span> element that closes the modal
                            var span = document.getElementsByClassName("close")[0];
                            
                            // When the user clicks the button, open the modal 
                            btn.onclick = function() {
                              modal.style.display = "block";
                            }
                            
                            // When the user clicks on <span> (x), close the modal
                            span.onclick = function() {
                              modal.style.display = "none";
                            }
                            
                            // When the user clicks anywhere outside of the modal, close it
                            window.onclick = function(event) {
                              if (event.target == modal) {
                                modal.style.display = "none";
                              }
                            }
                            </script>
                    </div>
                </div>           
            </div>
			<br>
			<br>
            <div class="graphs">
				<div class="container-fluid">
                    <!-- Example row of columns -->
                    <div class="row">
                        <div class="chart-wrapper">
							<div id="chartContainer" style="height: 370px; width: 100%;margin: 0px auto;">
	<div class="canvasjs-chart-container" style="position: relative; text-align: left; cursor: auto; direction: ltr;">
		<canvas class="canvasjs-chart-canvas" width="1150" height="462" style="width: 920px; height: 370px; position: absolute; user-select: none;"></canvas>
		<canvas class="canvasjs-chart-canvas" width="1150" height="462" style="width: 920px; height: 370px; position: absolute; -webkit-tap-highlight-color: transparent; user-select: none; cursor: default;"></canvas>
		<div class="canvasjs-chart-toolbar" style="position: absolute; right: 1px; top: 1px; border: 1px solid transparent;">
			<button state="pan" type="button" title="Pan" style="display: none; background-color: white; color: black; border-top: none; border-right: 1px solid rgb(33, 150, 243); border-bottom: none; border-left: none; border-image: initial; user-select: none; padding: 5px 12px; cursor: pointer; float: left; width: 40px; height: 25px; outline: 0px; vertical-align: baseline; line-height: 0; transition: all 0.4s ease 0s;">
				<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAICSURBVEhLxZbPahNRGMUn/5MpuAiBEAIufQGfzr5E40YptBXajYzudCEuGqS+gGlrFwquDGRTutBdYfydzJ3LzeQmJGZue+Dw/Z17Mnfmu5Pof9Hr9Z61Wq0bWZMKj263O6xWq99wU9lOpzPMKgEhEcRucNOcioOK+0RzBhNvt9tPV4nmVF19+OWhVqt9xXgFXZq+8lCv119UKpUJ7iX2FmvFTKz8RH34YdBsNk8wVtjE4fGYwm8wrrDi3WBG5oKXZGRSS9hGuNFojLTe2lFz5xThWZIktayyiE2FdT3rzXBXz7krKiL8c17wAKFDjCus2AvW+YGZ9y2JF0VFRuMPfI//rsCE/C+s26s4gQu9ul7r4NteKx7H8XOC724xNNGbaNu++IrBqbOV7Tj3FgMRvc/YKOr3+3sE47wgEt/Bl/gaK5cHbNU11vYSXylfpK7XOvjuumPp4Wcoipu30Qsez2uMXYz4lfI+mOmwothY+SLiXJy7mKVpWs3Si0CoOMfeI9Od43Wic+jO+ZVv+crsm9QSNhUW9LXSeoPBYLXopthGuFQgdIxxhY+UDwlt1x5CZ1hX+NTUdt/OIvjKaDSmuOJfaIVNPKX+W18j/PLA2/kR44p5Sd8HbHngT/yTfNRWUXX14ZcL3wmX0+TLf8YO7CGT8yFE5zB3/gney25/OETRP9CtPDFe5jShAAAAAElFTkSuQmCC" alt="Pan" style="height: 95%; pointer-events: none;">
			</button>
			<button state="reset" type="button" title="Reset" style="display: none; background-color: white; color: black; border-top: none; border-right: 1px solid rgb(33, 150, 243); border-bottom: none; border-left: none; border-image: initial; user-select: none; padding: 5px 12px; cursor: pointer; float: left; width: 40px; height: 25px; outline: 0px; vertical-align: baseline; line-height: 0; transition: all 0.4s ease 0s;">
				<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAeCAYAAABJ/8wUAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAPjSURBVFhHxVdJaFNRFP1J/jwkP5MxsbaC1WJEglSxOFAXIsFpVRE3ggi1K90obioRRBA33XXnQnciirhQcMCdorgQxBkXWlREkFKsWkv5npvckp/XnzRpKh64kLw733fffe9L/wrL0+mVUdO8uTSZ3MBL/we2qg4rkuSpodCELstXE46ziVkLQ6FQcGOmeSSq6wd4aV50d3drWjj8kQKZJTUc9kxFGenv79dZrDksTSTWWJp2QYtEPiErysyzdX0LsxsCQR8keX8gs6RHIk8ysdgKFg2G53mhuOPsshTlBjKaFo1g7SqLNoShKLdFXT8huQ/paLSbxatYnc2mHMM4hr18Vi8TIvCmXF3vYrW6cF23gGTOk0M1wA4RKvOmq6vLZRVJipvmSWT6tZ6CSEYkco5V50VPT4+D7RwOqi6RiSZm0fJ+vggSqkeoypdsNmuyelNwbXsbgvkWYMtzDWNvWaijoyOBqE+hVK8abcssUeXQ/YfKyi0gFYv1Ipgfoj34fYGTJLOYJA0ODirok32GLN8XhUWCwSes1hIwBg6LydJ/tEeRRapAdUp+wSAiZchtZZWWgAZ+JNpD8peYXQVK9UwUxNpzOK8pq97kURZhYTCKBwPD7h2zK+js7Myi7D8Fod+0TkMI8+EMAngLGc/WtBFWawkFHFnoj/t9KLgGmF0B3QfkxC+EarxkdhnFYlFLY06USqUwL7UMjICHfh/wOc2sCqhpxGbCkLvL7EUDbF73+6DkmVWB6zi7xUDQSLeYvWjAILvm9zEnkJhlbRcDQZcv6Kg2AipyT/Axw6wKlqVSqxDdjF8Izfod13qURdrG/nxehY+xGh+h0CSzKygGvSNQIcc097BI24jb9hax6kj2E7OrMFX1il+ICEf2NrPbhiXLl+fYl+U7zK4iYdsDcyLGf+ofFlkwcN+s10KhmpuYhhtm0hCLVIFL0MDsqNlDIqy9x2CLs1jL6OvrI7vPRbtohXG6eFmsFnHDGAp6n9AgyuVySRZrGvROxRgIfLXhzjrNYnNBUxNX/dMgRWT1mt4XLDovaApD53E9W3ilNX5M55LJHpRtIsgAvciR4WWcgK2Dvb1YqgXevmF8z2zEBTcKG39EfSKsT9EbhVUaI2FZO+oZIqImxol6j66/hcAu4sSN4vc1ZPoKeoE6RGhYL2YYA+ymOSSi0Z0wWntbtkGUWCvfSDXIxONraZ/FY90KUfNTpfC5spnNLgxoYNnR9RO4F8ofXEHOgogCQE99w+fF2Xw+b7O59rEOsyRqGEfpVoaDMQQ1CZrG46bcM6AZ0C/wPqNfHliqejyTySxh9TqQpL+xmbIlkB9SlAAAAABJRU5ErkJggg==" alt="Reset" style="height: 95%; pointer-events: none; filter: invert(0%);">
			</button>
		</div>
		<div class="canvasjs-chart-tooltip" style="position: absolute; height: auto; box-shadow: rgba(0, 0, 0, 0.1) 1px 1px 2px 2px; z-index: 1000; pointer-events: none; display: none; border-radius: 0px; left: 669px; bottom: -177px; transition: left 0.1s ease-out 0s, bottom 0.1s ease-out 0s;">
			<div style="width: auto; height: auto; min-width: 50px; line-height: normal; margin: 0px; padding: 5px; font-family: &quot;Trebuchet MS&quot;, Helvetica, sans-serif; font-weight: normal; font-style: normal; font-size: 14px; color: black; text-shadow: rgba(0, 0, 0, 0.1) 1px 1px 1px; text-align: left; border: 1px solid rgb(79, 129, 188); background: rgba(255, 255, 255, 0.9); text-indent: 0px; white-space: nowrap; border-radius: 0px; user-select: none;">
				09:41:12 AM<br>
				<span data-color="#4F81BC" style="color: rgb(79, 129, 188);">Average Voltage LL:</span>
				&nbsp;&nbsp;-4.83
				<br>
				<span data-color="#C0504E" style="color: rgb(192, 80, 78);">Current_i1:</span>
				&nbsp;&nbsp;-4.54
				<br>
				<span data-color="#9BBB58" style="color: rgb(155, 187, 88);">Frequency:</span>
				&nbsp;&nbsp;15.63
				<br><span data-color="#23BFAA" style="color: rgb(35, 191, 170);">Total Harmonic Distortion:</span>
				&nbsp;&nbsp;19.36
				<br>
				<span data-color="saddlebrown" style="color: saddlebrown;">Apparent Energy:</span>
				&nbsp;&nbsp;16.05
				<br>
				<span data-color="#4AACC5" style="color: rgb(74, 172, 197);">Power Factor:</span>
				&nbsp;&nbsp;13.25
				<br>
				<span data-color="#F79647" style="color: rgb(247, 150, 71);">Energy:</span>
				&nbsp;&nbsp;2.70
				<br><span data-color="#7F6084" style="color: rgb(127, 96, 132);">Power:</span>
				&nbsp;&nbsp;12.65
				<br>
				<span data-color="#77A033" style="color: rgb(119, 160, 51);">Apparent Power:</span>
				&nbsp;&nbsp;28.75
			</div>
		</div>
	<!--	<a class="canvasjs-chart-credit" title="JavaScript Charts" tabindex="-1" target="_blank" href="{{ url_for('mapping') }}" style="outline: none; margin: 0px; position: absolute; right: 2px; top: 356px; color: dimgrey; text-decoration: none; font-size: 11px; font-family: Calibri, &quot;Lucida Grande&quot;, &quot;Lucida Sans Unicode&quot;, Arial, sans-serif;">Home</a>-->
	</div>
	</div>
<script src="https://cdn.canvasjs.com/canvasjs.min.js"></script>
                
                        </div>
                    </div>
                </div>

                <br>
                <br>
                <div class="container-fluid">
                    <!-- Example row of columns -->
                    <div class="row">
                        <div class="chart-wrapper" id="data-a">
                
                        </div>
                    </div>
                </div>

                <br>
                <br>
                
                <div class="container-fluid">
                    <!-- Example row of columns -->
                    <div class="row">
                        <div class="chart-wrapper" id="data-b">
                
                        </div>
                    </div>
                </div>

                <br>
                <br>
                
                <div class="container-fluid">
                    <!-- Example row of columns -->
                    <div class="row">
                        <div class="chart-wrapper" id="data-c">
                
                        </div>
                    </div>
                </div>

                <br>
                <br>

                <div class="container-fluid">
                    <!-- Example row of columns -->
                    <div class="row">
                        <div class="chart-wrapper" id="data-d">
                
                        </div>
                    </div>
                </div>

                <br>
                <br>

                <div class="container-fluid">
                <!-- Example row of columns -->
                    <div class="row">
                        <div class="chart-wrapper" id="data-e">
                
                        </div>
                    </div>
                </div>

                <br>
                <br>

                <div class="container-fluid">
                    <!-- Example row of columns -->
                    <div class="row">
                        <div class="chart-wrapper" id="data-f">
            
                        </div>
                    </div>
                </div>

                <br>
                <br>   

                <div class="container-fluid">
                    <!-- Example row of columns -->
                    <div class="row">
                        <div class="chart-wrapper" id="data-g">
        
                        </div>
                    </div>
                </div>

                <br>
                <br> 

                <div class="container-fluid">
                    <!-- Example row of columns -->
                    <div class="row">
                        <div class="chart-wrapper" id="data-h">
        
                        </div>
                    </div>
                </div>
    
                <br>
                <br>  
    
                <div class="container-fluid">
                    <!-- Example row of columns -->
                    <div class="row">
                        <div class="chart-wrapper" id="data-i">
        
                        </div>
                    </div>
                </div> 
    
                <br>
                <br>
                <br>  
    
                <div class="container-fluid">
                    <!-- Example row of columns -->
					<div class="row">
                        <div class="chart-wrapper" id="data-i1">
        
                        </div>
                    </div>
                </div>
    
                <br>
                <br>  
    
                <div class="container-fluid">
					<div class="row">
                        <div class="chart-wrapper" id="data-i2">
        
                        </div>
                    </div>
                </div>
    
                <br>
                <br>  
    
                <div class="container-fluid">
                    <div class="row">
                        <div class="chart-wrapper" id="data-loc">
        
                        </div>
                    </div>
                </div> 

                <script>
                    var charta;
                    var chartb;
                    var chartc;
                    var chartd;
                    var charte;
                    var chartf;
                    var chartg;
                    var charth;
                    var charti;
                    var chartj;
                    var chartloc;
					var data2 = []; //avg current
				    var dataloc2 = []; //i1
					var dataloc3 = []; //i2
					var dataloc4 = []; //i3
var dataloc30 = []; 
					var dataloc40 = [];
					var x = []; //tst
            
                    function requestData()
                    {
                        // Ajax call to get the Data from Flask
                        var requests = $.get('/data');
						
            
                        var tm = requests.done(function (result)
                        {
                            // a
                            var seriesa = charta.series[0],
                                shifta = seriesa.data.length > 500;
            
                            // b
                            var seriesb = chartb.series[0],
                                shiftb = seriesb.data.length > 500;  
            
                            // c
                            var seriesc = chartc.series[0],
                                shiftc = seriesc.data.length > 500;
     
                            // d
                            var seriesd = chartd.series[0],
                                shiftd = seriesd.data.length > 500;
                                
                            // e
                            var seriese = charte.series[0],
                                shifte = seriese.data.length > 500;
    
                            // f
                            var seriesf = chartf.series[0],
                                shiftf = seriesf.data.length > 500;
            
                            // g
                            var seriesg = chartg.series[0],
                                shiftg = seriesg.data.length > 500;        
                             // h
                             var seriesh = charth.series[0],
                                shifth = seriesh.data.length > 500;  
                                
                            // i
                             var seriesi = charti.series[0],
                                shifti = seriesi.data.length > 500;
							
							                             var seriesi1 = charti1.series[0],
                                shifti1 = seriesi1.data.length > 500;
							
							                             var seriesi2 = charti2.series[0],
                                shifti2 = seriesi2.data.length > 500;
    
                            // j
                             //var seriesj = chartj.series[0],
                                //shiftj = seriesj.data.length > 500;
            
                            // Add the Point
                            // Time a\
                            var data1 = [];
                            data1.push(result[0]);
                            data1.push(result[1]);
							console.log("generation of data1");
							console.log(result);
            
            
                            // Add the Point
                            // Time b
                            data2 = [];
                            data2.push(result[0]);
                            data2.push(result[2]);
            
            
                            //Add the Point
                            // Time c
                            var data3 = [];
                            data3.push(result[0]);
                            data3.push(result[3]);
    
    
    
                            //Add the Point
                            // Time d
                            var data4 = [];
                            data4.push(result[0]);
                            data4.push(result[4]);
    
                            //Add the Point
                            // Time e
                            var data5 = [];
                            data5.push(result[0]);
                            data5.push(result[5]);        
            
                            //Add the Point
                            // Time f
                            var data6 = [];
                            data6.push(result[0]);
                            data6.push(result[6]);  
                            
                            //Add the Point
                            // Time g
                            var data7 = [];
                            data7.push(result[0]);
                            data7.push(result[7]);
    
                            //Add the Point
                            // Time h
                           var data8 = [];
                            data8.push(result[0]);
                            data8.push(result[8]);
    
                                                    //Add the Point
                            // Time i
                            var data9 = [];
                            data9.push(result[0]);
                            data9.push(result[9]);
    
                            // Time j
                            var data10 = [];
                            data10.push(result[0]);
                            data10.push(result[10]);
    
                             // Time loc
                            var dataloc = [];
                            dataloc.push(result[0]);
                            dataloc.push(result[11]);
							
							dataloc2 = [];
							dataloc2.push(result[0]);
                            dataloc2.push(result[12]);
							
							dataloc3 = [];
							dataloc3.push(result[0]);
                            dataloc3.push(result[13]);
							
							dataloc4 = [];
							dataloc4.push(result[0]);
                            dataloc4.push(result[14]);
							
							dataloc30 = [];
							dataloc30.push(result[0]);
                            dataloc30.push(result[16]);
							
					        dataloc40 = [];
							dataloc40.push(result[0]);
                            dataloc40.push(result[17]);
						
							
							
							
							
							x=[];
							x.push(result[15]);
							console.log(result[15]);
							console.log(x);
            
                            charta.series[0].addPoint(data1, true, shifta);
                            chartb.series[0].addPoint(data2, true, shiftb);
                            chartc.series[0].addPoint(data3, true, shiftc);
                            chartd.series[0].addPoint(data5, true, shiftd);
                            charte.series[0].addPoint(data6, true, shifte);
                            chartf.series[0].addPoint(data7, true, shiftf);
                            chartg.series[0].addPoint(data8, true, shiftg);
                            charth.series[0].addPoint(data9, true, shifth);
                            charti.series[0].addPoint(data10, true, shifti);
							charti1.series[0].addPoint(dataloc30, true, shifti1);
							charti2.series[0].addPoint(dataloc40, true, shifti2);
            
    
                            
                           // $(".sensor1").text("");
                            $(".sensor1").text("Average Voltage LL : " +  data1[1] );
            
                           // $(".sensor2").text("");
                            $(".sensor2").text("Average Current : " +  data2[1] );
							$(".sensor21").text("Current_i1 : " +  dataloc2[1] );
							$(".sensor22").text("Current_i2: " +  dataloc3[1] );
							$(".sensor23").text("Current_i3: " +  dataloc4[1] );
            
                           // $(".sensor3").text("");
                            $(".sensor3").text("Frequency : " + data3[1] );
                            
                           // $(".sensor5").text("");
                            $(".sensor5").text("Average Power Factor : " +  data5[1]);
    
                            //$(".sensor6").text("");
                            $(".sensor6").text("Active Power : " +  data6[1]);
            
                          //  $(".sensor7").text("");
                            $(".sensor7").text("Active Energy : " +  data7[1]);
                            
                           // $(".sensor8").text("");
                            $(".sensor8").text("Apparent Power : " +  data8[1]);
                            
                           // $(".sensor9").text("");
                            $(".sensor9").text("Apparent Energy : " +  data9[1]);
    
                            //$(".sensor4").text("");
                            $(".sensor4").text("Total Harmonic Distortion : " +  data10[1]);
    
                           // $(".sensor10").text("");
                            $(".sensor10").text("Meter ID : " +  data4[1]);
                            $(".sensor91").text("Reactive power : " +  dataloc30[1]);
							$(".sensor92").text("Reactive energy : " +  dataloc40[1]);
    
                           // $(".sensor11").text("");
                            //$(".sensor11").text("Meter location : " +  {{ data3 }});
							
							
                            
                            // call it again after one second
                            setTimeout(requestData, 50000);
            
                        });
                    }
            
                    $(document).ready(function()
                    {
                        // --------------Chart 1 ----------------------------
                        charta = new Highcharts.Chart({
                            chart:
                                {
                                renderTo: 'data-a',
                                defaultSeriesType: 'spline',
                                events: {
                                    load: requestData
                                        }
                                },
                            title:
                                {
                                text: 'Average Voltage LL'
                                },
                            credits:{enabled:false},
                            xAxis: {
                                type: 'datetime',
                                tickPixelInterval: 1800000,
                                maxRange: 30 * 60000
                                    },
                            yAxis: {
                                minPadding: 0.2,
                                maxPadding: 0.2,
                                title: {
                                    text: 'Average Voltage LL',
                                    margin: 80
                                        }
                                     },
                            series: [{
                                color : '#c23d23',
                                lineColor: '#303030',
                                name: 'Average Voltage LL',
                                data: []
                            }]
                        });
                        // --------------Chart 1 Ends - -----------------
            
                        chartb = new Highcharts.Chart({
                            chart:
                                {
                                    renderTo: 'data-b',
                                    defaultSeriesType: 'spline',
                                    events: {
                                        load: requestData
                                    }
                                },
                            title:
                                {
                                    text: 'Average Current'
                                },
                            credits:{enabled:false},
                            xAxis: {
                                type: 'datetime',
                                tickPixelInterval: 1800000,
                                maxRange: 30 * 60000
                            },
                            yAxis: {
                                minPadding: 0.2,
                                maxPadding: 0.2,
                                title: {
                                    text: 'Average Current',
                                    margin: 80
                                }
                            },
                            series: [{
                                color : '#c23d23',
                                lineColor: '#303030',
                                name: 'Average Current',
                                data: []
                            }]
                        });
                        // --------------------Chart 2 Ends --------------------
            
                        // --------------Chart 3 ----------------------------
                            chartc = new Highcharts.Chart({
                            chart:
                                {
                                renderTo: 'data-c',
                                defaultSeriesType: 'spline',
                                events: {
                                    load: requestData
                                        }
                                },
                            title:
                                {
                                text: 'Frequency'
                                },
                            
                            credits:{enabled:false},
                            xAxis: {
                                type: 'datetime',
                                tickPixelInterval: 1800000,
                                maxRange: 30 * 60000
                                    },
                            yAxis: {
                                minPadding: 0.2,
                                maxPadding: 0.2,
                                title: {
                                    text: 'Frequency',
                                    margin: 80
                                        }
                                     },
                            series: [{
                                color : '#c23d23',
                                lineColor: '#303030',
                                name: 'Frequency',
                                data: []
                            }]
                        });
                        // --------------Chart 3 Ends - ----------------
    
                    //-----------chart 4 ---------------------
                                        // --------------Chart 1 ----------------------------
                            chartd = new Highcharts.Chart({
                            chart:
                                {
                                renderTo: 'data-d',
                                defaultSeriesType: 'spline',
                                events: {
                                    load: requestData
                                        }
                                },
                            title:
                                {
                                text: 'Average Power Factor'
                                },
                            credits:{enabled:false},
                            xAxis: {
                                type: 'datetime',
                                tickPixelInterval: 1800000,
                                maxRange: 30 * 60000
                                    },
                            yAxis: {
                                minPadding: 0.2,
                                maxPadding: 0.2,
                                title: {
                                    text: 'Average Power Factor',
                                    margin: 80
                                        }
                                     },
                            series: [{
                                color : '#c23d23',
                                lineColor: '#303030',
                                name: 'Average Power Factor',
                                data: []
                            }]
                        });
    
                        //---------chart 5 -------
                                            // --------------Chart 1 ----------------------------
                           charte = new Highcharts.Chart({
                            chart:
                                {
                                renderTo: 'data-e',
                                defaultSeriesType: 'spline',
                                events: {
                                    load: requestData
                                        }
                                },
                            title:
                                {
                                text: 'Active Power'
                                },
                            credits:{enabled:false},
                            xAxis: {
                                type: 'datetime',
                                tickPixelInterval: 1800000,
                                maxRange: 30 * 60000
                                    },
                            yAxis: {
                                minPadding: 0.2,
                                maxPadding: 0.2,
                                title: {
                                    text: 'Active Power',
                                    margin: 80
                                        }
                                     },
                            series: [{
                                color : '#c23d23',
                                lineColor: '#303030',
                                name: 'Active power',
                                data: []
                            }]
                        });
                        //---------------------- chart 6---------
                                            // --------------Chart 1 ----------------------------
                            chartf = new Highcharts.Chart({
                            chart:
                                {
                                renderTo: 'data-f',
                                defaultSeriesType: 'spline',
                                events: {
                                    load: requestData
                                        }
                                },
                            title:
                                {
                                text: 'Active Energy'
                                },
                            credits:{enabled:false},
                            xAxis: {
                                type: 'datetime',
                                tickPixelInterval: 1800000,
                                maxRange: 30 * 60000
                                    },
                            yAxis: {
                                minPadding: 0.2,
                                maxPadding: 0.2,
                                title: {
                                    text: 'Active Energy',
                                    margin: 80
                                        }
                                     },
                            series: [{
                                color : '#c23d23',
                                lineColor: '#303030',
                                name: 'Active Energy',
                                data: []
                            }]
                        });
                        //-------------------chart 7 --------
                                            // --------------Chart 1 ----------------------------
                           chartg = new Highcharts.Chart({
                            chart:
                                {
                                renderTo: 'data-g',
                                defaultSeriesType: 'spline',
                                events: {
                                    load: requestData
                                        }
                                },
                            title:
                                {
                                text: 'Apparent Power'
                                },
                            credits:{enabled:false},
                            xAxis: {
                                type: 'datetime',
                                tickPixelInterval: 1800000,
                                maxRange: 30 * 60000
                                    },
                            yAxis: {
                                minPadding: 0.2,
                                maxPadding: 0.2,
                                title: {
                                    text: 'Apparent Power',
                                    margin: 80
                                        }
                                     },
                            series: [{
                                color : '#c23d23',
                                lineColor: '#303030',
                                name: 'Apparent Power',
                                data: []
                            }]
                        });
                      //--------------------chart 8 ------------------
                                          // --------------Chart 1 ----------------------------
                            charth = new Highcharts.Chart({
                            chart:
                                {
                                renderTo: 'data-h',
                                defaultSeriesType: 'spline',
                                events: {
                                    load: requestData
                                        }
                                },
                            title:
                                {
                                text: 'Apparent Energy'
                                },
                            credits:{enabled:false},
                            xAxis: {
                                type: 'datetime',
                                tickPixelInterval: 1800000,
                                maxRange: 30 * 60000
                                    },
                            yAxis: {
                                minPadding: 0.2,
                                maxPadding: 0.2,
                                title: {
                                    text: 'Apparent Energy',
                                    margin: 80
                                        }
                                     },
                            series: [{
                                color : '#c23d23',
                                lineColor: '#303030',
                                name: 'Apparent Energy',
                                data: []
                            }]
                        }); 
                        //--------------chart 9 ---------
                            charti = new Highcharts.Chart({
                            chart:
                                {
                                renderTo: 'data-i',
                                defaultSeriesType: 'spline',
                                events: {
                                    load: requestData
                                        }
                                },
                            title:
                                {
                                text: 'Total Harmonic Distortion'
                                },
                            credits:{enabled:false},
                            xAxis: {
                                type: 'datetime',
                                tickPixelInterval: 1800000,
                                maxRange: 30 * 60000
                                    },
                            yAxis: {
                                minPadding: 0.2,
                                maxPadding: 0.2,
                                title: {
                                    text: 'Total Harmonic Distortion',
                                    margin: 80
                                        }
                                     },
                            series: [{
                                color : '#c23d23',
                                lineColor: '#303030',
                                name: 'Total Harmonic Distortion',
                                data: []
                            }]
                        }); 
						charti1 = new Highcharts.Chart({
                            chart:
                                {
                                renderTo: 'data-i1',
                                defaultSeriesType: 'spline',
                                events: {
                                    load: requestData
                                        }
                                },
                            title:
                                {
                                text: 'Reactive Power'
                                },
                            credits:{enabled:false},
                            xAxis: {
                                type: 'datetime',
                                tickPixelInterval: 1800000,
                                maxRange: 30 * 60000
                                    },
                            yAxis: {
                                minPadding: 0.2,
                                maxPadding: 0.2,
                                title: {
                                    text: 'Reactive Power',
                                    margin: 80
                                        }
                                     },
                            series: [{
                                color : '#c23d23',
                                lineColor: '#303030',
                                name: 'Reactive Power',
                                data: []
                            }]
                        }); 
						charti2 = new Highcharts.Chart({
                            chart:
                                {
                                renderTo: 'data-i2',
                                defaultSeriesType: 'spline',
                                events: {
                                    load: requestData
                                        }
                                },
                            title:
                                {
                                text: 'Reactive Energy'
                                },
                            credits:{enabled:false},
                            xAxis: {
                                type: 'datetime',
                                tickPixelInterval: 1800000,
                                maxRange: 30 * 60000
                                    },
                            yAxis: {
                                minPadding: 0.2,
                                maxPadding: 0.2,
                                title: {
                                    text: 'Reactive Energy',
                                    margin: 80
                                        }
                                     },
                            series: [{
                                color : '#c23d23',
                                lineColor: '#303030',
                                name: 'Reactive Energy',
                                data: []
                            }]
                        }); 
                    });
window.onload = function () {
	//console.log(data1)

var dataPoints1 = [];
var dataPoints2 = [];
var dataPoints3 =[];
var dataPoints4 = [];

var chart = new CanvasJS.Chart("chartContainer", {
	zoomEnabled: true,
	title: {
		text: "Cumulative Graph",
		
		fontSize:25,
	},
	axisX: {
		title: "Data(/s)"
	},
	axisY:{
		//prefix: "$"
	}, 
	toolTip: {
		shared: true
	},
	legend: {
		cursor:"pointer",
		verticalAlign: "top",
		fontSize: 12,
		fontColor: "dimGrey",
		itemclick : toggleDataSeries
	},
	data: [
		{ 
		type: "line",
		xValueType: "dateTime",
		yValueFormatString: "####.00",
		
		showInLegend: true,
		name: "Average Current LL",
		dataPoints: dataPoints1
	
		},
		{ 
		type: "line",
		xValueType: "dateTime",
		yValueFormatString: "####.00",
	    
		showInLegend: true,
		name: "Current_i1",
		dataPoints: dataPoints2
	
		},
		{				
			type: "line",
			xValueType: "dateTime",
			yValueFormatString: "####.00",
			
			showInLegend: true,
			name: "Current_i2" ,
			dataPoints: dataPoints3
	},
	{				
			type: "line",
			xValueType: "dateTime",
			yValueFormatString: "####.00",
		    
			showInLegend: true,
			name: "Current_i3" ,
			dataPoints: dataPoints4
	}]
});

function toggleDataSeries(e) {
	if (typeof(e.dataSeries.visible) === "undefined" || e.dataSeries.visible) {
		e.dataSeries.visible = false;
	}
	else {
		e.dataSeries.visible = true;
	}
	chart.render();
}

var updateInterval = 1000;
// initial value
/*var yValue1 =data1[1];
var yValue2 = data2[1];
var yValue3 = data3[1];
var yValue4 = data5[1];
var yValue5 = data6[1];
var yValue6 = data7[1];
var yValue7 = data8[1];
var yValue8 = data9[1];
var yValue9 = data10[1];*/



function updateChart(count) {
	count = count || 1;
	//var deltaY1, deltaY2, deltaY3, deltaY4, deltaY5, deltaY6, deltaY7, deltaY8, deltaY9;
	for (var i = 0; i < count; i++) {
		var time = x[0];
	
var time1 = parseInt(time);
console.log(time1);
		var tm = time1;
		

	// adding random value and rounding it to two digits. 
	/*yValue1 = Math.round((yValue1)*100)/100;
	//yValue2 = Math.round((yValue2)*100)/100;
    //yValue3 = Math.round((yValue3)*100)/100;
	/*yValue4 = ((yValue4)*100)/100;
	yValue5 = ((yValue5)*100)/100;
    yValue6 = ((yValue6)*100)/100;
    yValue7 = ((yValue7)*100)/100;
	yValue8 = ((yValue8)*100)/100;
    yValue9 = ((yValue9)*100)/100;*/

		console.log("data1");
		console.log(tm);
		console.log(time1);


	// pushing the new values
	dataPoints1.push({
		x: tm,//data1[0];
		y: data2[1]
	});
	dataPoints2.push({
		x: tm,//data2[0];
		y: dataloc2[1]
	});
		dataPoints3.push({
		x: tm,//data3[0];
		y: dataloc3[1]
	});
		dataPoints4.push({
		x: tm,//data5[0];
		y: dataloc4[1]
	});
		
		
	}

	// updating legend text with  updated with y Value 
	//chart.options.data[0].legendText = " Company A  $" + yValue1;
	//chart.options.data[1].legendText = " Company B  $" + yValue2;
	
chart.render();
}
// generates first set of dataPoints 
updateChart(1);	
setInterval(function(){updateChart()}, updateInterval);
	//setInterval(5000)

}

</script>
				<script>
function myFunction() {
	var x={{data2}};
	var y={{data1}};
	if(x==0 && y==0){
  document.getElementById("demo").innerHTML = "No data is available for selected meter.";
	}
}
myFunction();
</script>
				
            
            </div>
        </div>
    </div>
</body>
<style>
body{
    margin: 0;
    border: 0;
    box-sizing: border-box;
    height: 100vh;
    min-width: 960px;
    overflow: auto;
    overflow-x: auto;
    overflow-y: auto;
    
}
.home .left {
    width: 30%;
    border: solid black 1px;
    min-height: fit-content;
    overflow: scroll;
    overflow-y: scroll;
    padding-left: 1%;
    padding-right: 1%;
    background-image: linear-gradient(rgb(7, 7, 70), rgb(134, 134, 145));
}

.home .right {
    width: 70%;
    border: solid black 1px;
    height: 100%;
	min-height: fit-content;
}
.home{
    background-color: badae9;
    width: 100%;
    display: flex;
    margin: 0;
    height: 100% ;
}
.datasets{
    display: inline-block;
    border: solid white 1px;
    width: 100%;
    padding: 6px;
    margin-top: 6px;
    color: white;

}
.sensor1{
    font-size: large;
}
.sensor2{
    font-size: large;
}
	.sensor21{
    font-size: large;
}
		.sensor22{
    font-size: large;
}
		.sensor23{
    font-size: large;
}
	
.sensor3{
    font-size: large;
}
.sensor4{
    font-size: large;
}
.sensor5{
    font-size: large;
}
.sensor6{
    font-size: large;
}
.sensor7{
    font-size: large;
}
.sensor8{
    font-size: large;
}
.sensor9{
    font-size: large;
}
.sensor10{
    font-size: large;
}
.sensor11{
    font-size: large;
}
	.sensor91{
    font-size: large;
}
	.sensor92{
    font-size: large;
}
.energy_meter{
    margin-top: 6px;
    color: white;
    padding: 6px;
    margin-bottom: 10px;
    border: solid white 1px;
}
.put{
    padding-top: 12px;
}
.values{
    font-size: large;
}
.buttons{
    margin-bottom: 20px;
    display: flex;
    grid-template-columns: 1fr 1fr;
    padding-left: 20px;
    margin-top: 20px;
    position: relative;
    min-height: max-content;
}
.buttons a{
	display: block;
	background: #00A9D4;
	color: #fff;
	padding: 4px;
	cursor: pointer;
	text-decoration: none;
	width: 200px;
	text-align: center;
	border-radius: 5px;
	font-size: 20px;
	margin-top: 10px;
}
.buttons a:hover {
	background: #00729D;
}
.buttons .a{
    display: block;
	background: #00A9D4;
	color: #fff;
	padding: 4px;
	cursor: pointer;
	text-decoration: none;
	width: 200px;
	text-align: center;
	border-radius: 5px;
	font-size: 20px;
    border: none;
    margin-top: 10px;
}
.buttons .a:hover {
	background: #00729D;
}
	.datime{
    position:absolute;
		right: 1%;}
.btns{
    position:absolute;
    right: 30px;
	top: 30px;
}
.modal {
  display: none; /* Hidden by default */
  position: fixed; /* Stay in place */
  z-index: 1; /* Sit on top */
  padding-top: 100px; /* Location of the box */
  left: 0;
  top: 0;
  width: 100%; /* Full width */
  height: 100%; /* Full height */
  overflow: auto; /* Enable scroll if needed */
  background-color: rgb(0,0,0); /* Fallback color */
  background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
}
.modal-header{
    display: flex;
    justify-content: space-between;
    text-align-last: left;
}

/* Modal Content */
.modal-content {
  background-color: #fefefe;
  margin: auto;
  padding: 20px;
  border: 1px solid #888;
  width: 80%;
  overflow: auto;
  overflow-x: scroll;
  overflow-y: scroll;
}

/* The Close Button */
.close {
  color: #aaaaaa;
  float: right;
  font-size: 28px;
  font-weight: bold;
}

.close:hover,
.close:focus {
  color: #000;
  text-decoration: none;
  cursor: pointer;
}
#datatable{
  overflow-y: scroll;
  overflow-x: scroll;
  font-family: Arial, Helvetica, sans-serif;
  border-collapse: collapse;
}

#datatable td, #datatable th {
  border: 1px solid #ddd;
  padding: 8px;
}

#datatable tr:nth-child(even){background-color: #f2f2f2;}

#datatable tr:hover {background-color: #ddd;}

#datatable th {
  padding-top: 12px;
  padding-bottom: 12px;
  text-align: left;
  color: black;
}
.chart-wrapper{
    width: 100% !important;
    height: 80% !important;
    margin: 0% !important;
}


.graphs{  

    padding: 20px;
    max-height: 75%;
    overflow: auto;
    overflow-y: scroll;
	padding: 20px;
	border-style:groove;
	border-color:black;
	border-width:thin;
	
		
}
	.error{
		color: red;
		
		
	}
</style>
</html>
