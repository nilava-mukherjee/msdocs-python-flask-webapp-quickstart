<!DOCTYPE html>
<html  lang="en" dir="ltr">
<head>
    <meta charset="utf-8">
    <title>Meter Status </title>



    <!-- Bootstraps Java Scipts Links -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>


    <!-- JQuery links  -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>


    <!--High CHART LIVE  -->
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/highcharts-more.js"></script>
    <script src="https://code.highcharts.com/modules/exporting.js"></script>

    <!--Gauge  -->
    <script type="text/javascript" src="http://pubnub.github.io/eon/lib/eon.js"></script>


    <!--datepicker -->  
    <script type="text/javascript" src="https://cdn.jsdelivr.net/jquery/latest/jquery.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css" />
	
</head>
<body>
    <!-- including navbar using jinja -->
    {% include 'navbar.html' %}

    <!-- main part of the homepage -->
 

	
		<div class="home">
		
		
        
		
        <div class="right">
			
			
			
			 <div class="buttons"> 
				  <div class="datime">
						<div id="dateTime1">
					 	 <script>
      function displayDateTime() {
        var dateTime = new Date();
        var date = dateTime.toLocaleDateString();
        var time = dateTime.toLocaleTimeString();
        document.getElementById("dateTime1").innerHTML = " Date: " + date + " Time: " + time;
      }
      setInterval(displayDateTime, 1000);
    </script></div>
				 </div>
				 <div class="meterbox">
                    <label for="MeterNo.">Select Meter No.:</label>
                    <form method="post" action="/currentdata1">
                        <select  id="Meter_id" name="meter_id" type="text" placeholder ="Please select a meter">
                             <option disabled selected style>Select a meter</option>
                            <option value="GMBS C03_10D">GMBS C03_10D</option>
                            <option value="GMBS C05_08D">GMBS C05_08D</option>
                            <option value="GMBS C06_09D">GMBS C06_09D</option>
                            <option value="GMBS C08_16D">GMBS C08_16D</option>
                            <option value="GMBS C09_13D">GMBS C09_13D</option>
                            <option value="GMBS C18_14D">GMBS C18_14D</option>
                            <option value="GMBS C19_17D">GMBS C19_17D</option>
                            <option value="GMBS C20_18D">GMBS C20_18D</option>
                            <option value="GMBS C21_11D">GMBS C21_11D</option>
                            <option value="GMBS C24_12D">GMBS C24_12D</option>
                            <option value="GMBS C27_15D">GMBS C27_15D</option>
                           <!-- <option value="m1">Meter 1</option>
                            <option value="m2">Meter 2</option>
                            <option value="m3">Meter 3</option>
                            <option value="m4">Meter 4</option>
                            <option value="4">Meter 5</option>
                            <option value="1">Meter 6</option>
                            <option value="2">Meter 7</option>
                            <option value="3">Meter 8</option>
                            <option value="4">Meter 9</option>
                            <option value="4">Meter 10</option>
                            <option value="1">Meter 11</option>
                            <option value="2">Meter 12</option>
                            <option value="3">Meter 13</option>
                            <option value="4">Meter 14</option>
                            <option value="4">Meter 15</option>
                            <option value="1">Meter 16</option>
                            <option value="2">Meter 17</option>
                            <option value="3">Meter 18</option>
                            <option value="4">Meter 19</option>
                            <option value="4">Meter 20</option>
                            <option value="1">Meter 21</option>
                            <option value="2">Meter 22</option>
                            <option value="3">Meter 23</option>
                            <option value="4">Meter 24</option>
                            <option value="4">Meter 25</option>
                            <option value="1">Meter 26</option>
                            <option value="2">Meter 27</option>
                            <option value="3">Meter 28</option>
                            <option value="4">Meter 29</option>
                            <option value="4">Meter 30</option>
                            <option value="1">Meter 31</option>
                            <option value="2">Meter 32</option>
                            <option value="3">Meter 33</option>
                            <option value="4">Meter 34</option>
                            <option value="4">Meter 35</option>
                            <option value="1">Meter 36</option>
                            <option value="2">Meter 37</option>
                            <option value="3">Meter 38</option>
                            <option value="4">Meter 39</option>
                            <option value="4">Meter 40</option>
                            <option value="1">Meter 41</option>
                            <option value="2">Meter 42</option>
                            <option value="3">Meter 43</option>
                            <option value="4">Meter 44</option>
                            <option value="4">Meter 45</option>
                            <option value="1">Meter 46</option>
                            <option value="2">Meter 47</option>-->
                            


                        </select>    
                        <input type="submit" value="Submit" style="margin-left: 10px;"><div class="error"><h5><p id="demo"></p></h5></div>
                    </form>
					 
                </div>
          
            </div>
			
			<div class="left">
            <div class="parameters">
                <div class="meter_info">
                    <div class="datasets" style="background-color: #3e1212;">
                        <h1 class="sensor10">Meter ID :</h1>
                    <br>
                        <h1 class="sensor11">Meter location : {{ data3 }}</h1>
                    </div>
                </div>
                <div class="Live_parameter_data">                   
                    <div class="datasets">
                        <h1 class="sensor1"> Average Voltage LL : </h1>
                    </div>
                    <br>
        
                    <div class="datasets">
                        <h1 class="sensor2">Average Current :</h1>
                    </div>
                    <br>
					<div class="datasets">
                        <h1 class="sensor21">Current_i1 :</h1>
                    </div>
                    <br>
					<div class="datasets">
                        <h1 class="sensor22">Current_i2 :</h1>
                    </div>
                    <br>
					<div class="datasets">
                        <h1 class="sensor23">Current_i3 :</h1>
                    </div>
                    <br>
                    <div class="datasets">
                        <h1 class="sensor3">Frequency :</h1>
                    </div>
                    <br>
                    <div class="datasets">
                        <h1 class="sensor4">Total harmonic distortion :</h1>
                    </div>
                    <br>
                    <div class="datasets">
                        <h1 class="sensor5">Apparent energy :</h1>
                    </div>
                    <br>
                    <div class="datasets">
                        <h1 class="sensor6">Power factor :</h1>
                    </div>
                    <br>
                    <div class="datasets">
                        <h1 class="sensor7">Energy :</h1>
                    </div>
                    <br>
                    <div class="datasets">
                        <h1 class="sensor8">Power :</h1>
                    </div>
                    <br>
                    <div class="datasets">
                        <h1 class="sensor9">Apparent power :</h1>
                    </div>
                    <br>
<div class="datasets">
                        <h1 class="sensor91">Reactive power :</h1>
                    </div>
                    <br>
					<div class="datasets">
                        <h1 class="sensor92">Reactive energy :</h1>
                    </div>
                    <br>
                </div>
                <div class="energy_meter">               <!-- Energy Calculation -->
                    <div class="calculation">
                        <div class="put">
                            <h1 class="values">Energy Consumption of previous day:</h1>
                            <input type="number" id="t1" value= "{{ data2 }}" disabled> KWh
                        </div>
                        <div class="put">                        
                            <h1 class="values">Total production of Previous Day:</h1>
                            <input type="number" id="t2"> Kg
                        </div>
                        <div class="put">
                            <input type="button" onclick="calcTotalCons()" value="Submit"/>
                            <h1 class="values">Specific Energy:  </h1><input type="number" id="num-area" disabled> KWh/Kg
                        </div>
                        <script>
                            function calcTotalCons() { 
                                var a = document.getElementById("t1").value; 
                                var b = document.getElementById("t2").value; 
                                document.getElementById("num-area").value = a / b; 
                            }  
                        </script>        
                    </div>
                </div>
            </div>
        </div>
            
        </div>
	
	</div>
	<script>
                    var charta;
                    var chartb;
                    var chartc;
                    var chartd;
                    var charte;
                    var chartf;
                    var chartg;
                    var charth;
                    var charti;
                    var chartj;
                    var chartloc;
					var data2 = []; //avg current
				    var dataloc2 = []; //i1
					var dataloc3 = []; //i2
					var dataloc4 = []; //i3
var dataloc30 = []; 
					var dataloc40 = [];
					var x = []; //tst
		
	                function requestData()
                    {
                        // Ajax call to get the Data from Flask
                        var requests = $.get('/data');
						
            
                        var tm = requests.done(function (result)
                        {
							console.log("this is result")
							console.log(result)
                            var data1 = [];
                            data1.push(result[0]);
                            data1.push(result[1]);
							console.log("generation of data1");
							console.log(result);
            
            
                            // Add the Point
                            // Time b
                            data2 = [];
                            data2.push(result[0]);
                            data2.push(result[2]);
            
            
                            //Add the Point
                            // Time c
                            var data3 = [];
                            data3.push(result[0]);
                            data3.push(result[3]);
    
    
    
                            //Add the Point
                            // Time d
                            var data4 = [];
                            data4.push(result[0]);
                            data4.push(result[4]);
    
                            //Add the Point
                            // Time e
                            var data5 = [];
                            data5.push(result[0]);
                            data5.push(result[5]);        
            
                            //Add the Point
                            // Time f
                            var data6 = [];
                            data6.push(result[0]);
                            data6.push(result[6]);  
                            
                            //Add the Point
                            // Time g
                            var data7 = [];
                            data7.push(result[0]);
                            data7.push(result[7]);
    
                            //Add the Point
                            // Time h
                           var data8 = [];
                            data8.push(result[0]);
                            data8.push(result[8]);
    
                                                    //Add the Point
                            // Time i
                            var data9 = [];
                            data9.push(result[0]);
                            data9.push(result[9]);
    
                            // Time j
                            var data10 = [];
                            data10.push(result[0]);
                            data10.push(result[10]);
    
                             // Time loc
                            var dataloc = [];
                            dataloc.push(result[0]);
                            dataloc.push(result[11]);
							
							dataloc2 = [];
							dataloc2.push(result[0]);
                            dataloc2.push(result[12]);
							
							dataloc3 = [];
							dataloc3.push(result[0]);
                            dataloc3.push(result[13]);
							
							dataloc4 = [];
							dataloc4.push(result[0]);
                            dataloc4.push(result[14]);
							
							dataloc30 = [];
							dataloc30.push(result[0]);
                            dataloc30.push(result[16]);
							
					        dataloc40 = [];
							dataloc40.push(result[0]);
                            dataloc40.push(result[17]);
						
							
							
							
							
							x=[];
							x.push(result[15]);
							console.log(result[15]);
							console.log(x);
							
							$(".sensor1").text("Average Voltage LL : " +  data1[1] );
            
                           // $(".sensor2").text("");
                            $(".sensor2").text("Average Current : " +  data2[1] );
							$(".sensor21").text("Current_i1 : " +  dataloc2[1] );
							$(".sensor22").text("Current_i2: " +  dataloc3[1] );
							$(".sensor23").text("Current_i3: " +  dataloc4[1] );
            
                           // $(".sensor3").text("");
                            $(".sensor3").text("Frequency : " + data3[1] );
                            
                           // $(".sensor5").text("");
                            $(".sensor5").text("Average Power Factor : " +  data5[1]);
    
                            //$(".sensor6").text("");
                            $(".sensor6").text("Active Power : " +  data6[1]);
            
                          //  $(".sensor7").text("");
                            $(".sensor7").text("Active Energy : " +  data7[1]);
                            
                           // $(".sensor8").text("");
                            $(".sensor8").text("Apparent Power : " +  data8[1]);
                            
                           // $(".sensor9").text("");
                            $(".sensor9").text("Apparent Energy : " +  data9[1]);
    
                            //$(".sensor4").text("");
                            $(".sensor4").text("Total Harmonic Distortion : " +  data10[1]);
    
                           // $(".sensor10").text("");
                            $(".sensor10").text("Meter ID : " +  data4[1]);
                            $(".sensor91").text("Reactive power : " +  dataloc30[1]);
							$(".sensor92").text("Reactive energy : " +  dataloc40[1]);
            
							
							setInterval(requestData, 5000);
						})
						}
requestData();		

	
	</script>
	<script>
function myFunction() {
	var y={{data1}};
					
	if(y==0) 
	{
  document.getElementById("demo").innerHTML = "No data is available for selected meter.";
	}
}
myFunction();
					setInterval(1000);
					
					
</script>
</body>
<style>
body{
    margin: 0;
    border: 0;
    box-sizing: border-box;
    height: 100vh;
    min-width: 960px;
    overflow: auto;
    overflow-x: auto;
    overflow-y: auto;
	background-color: #badae9;
    
}
	

h1 {
  font-family:monospace;
}

@keyframes slide {
  0% {
    transform:translateX(-25%);
  }
  100% {
    transform:translateX(25%);
  }
}
.home .left {
    width: 100%;
    border: solid black 1px;
    min-height: fit-content;
    overflow-y: scroll;
	padding-left: 35%;
    padding-right: 35%;
    background-image: linear-gradient(rgb(7, 7, 70), rgb(134, 134, 145));
}

.home .right {
    width: 100%;
    
    height: 100%;
	min-height: fit-content;
}
.home{
    
    width: 100%;
    display: flex;
    margin: 0;
    height: 100% ;
	
}
.datasets{
    display: inline-block;
    border: solid white 1px;
    width: 100%;
    padding: 6px;
    margin-top: 6px;
    color: white;

}
.sensor1{
    font-size: large;
}
.sensor2{
    font-size: large;
}
	.sensor21{
    font-size: large;
}
		.sensor22{
    font-size: large;
}
		.sensor23{
    font-size: large;
}
	
.sensor3{
    font-size: large;
}
.sensor4{
    font-size: large;
}
.sensor5{
    font-size: large;
}
.sensor6{
    font-size: large;
}
.sensor7{
    font-size: large;
}
.sensor8{
    font-size: large;
}
.sensor9{
    font-size: large;
}
.sensor10{
    font-size: large;
}
.sensor11{
    font-size: large;
}
	.sensor91{
    font-size: large;
}
	.sensor92{
    font-size: large;
}
.energy_meter{
    margin-top: 6px;
    color: white;
    padding: 6px;
    margin-bottom: 10px;
    border: solid white 1px;
}
.put{
    padding-top: 12px;
}
.values{
    font-size: large;
}
.buttons{
    margin-bottom: 20px;
    display: flex;
    grid-template-columns: 1fr 1fr;
    padding-left: 20px;
    margin-top: 20px;
    position: relative;
    min-height: max-content;
}
.buttons a{
	display: block;
	background: #00A9D4;
	color: #fff;
	padding: 4px;
	cursor: pointer;
	text-decoration: none;
	width: 200px;
	text-align: center;
	border-radius: 5px;
	font-size: 20px;
	margin-top: 10px;
}
.buttons a:hover {
	background: #00729D;
}
.buttons .a{
    display: block;
	background: #00A9D4;
	color: #fff;
	padding: 4px;
	cursor: pointer;
	text-decoration: none;
	width: 200px;
	text-align: center;
	border-radius: 5px;
	font-size: 20px;
    border: none;
    margin-top: 10px;
}
.buttons .a:hover {
	background: #00729D;
}
	.datime{
    position:absolute;
		right: 1%;}
.btns{
    position:absolute;
    right: 30px;
	top: 30px;
}

	.error{
		color: red;
		
		
	}
</style>
</html>